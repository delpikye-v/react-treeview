!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("styled-components"),require("react"),require("@delpi/common"),require("react-perfect-scrollbar-z")):"function"==typeof define&&define.amd?define(["exports","styled-components","react","@delpi/common","react-perfect-scrollbar-z"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).ReactTreeView={},e.styled,e.React,e.common,e.Scrollbar)}(this,(function(e,n,t,o,r){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=l(n),a=l(t),d=l(r),c=function(){return c=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},c.apply(this,arguments)};function s(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}"function"==typeof SuppressedError&&SuppressedError;var f,u,p,m,b,h,x,g,v,y,k=i.default.div(f||(f=s(['\n  margin-left: 30px;\n  position: relative;\n\n  > span,\n  > i {\n    min-height: 20px;\n    vertical-align: middle;\n  }\n\n  .node-data-text {\n    display: inline-block;\n    padding: 0px 5px;\n  }\n\n  .node-data-text-toggle {\n    cursor: pointer;\n  }\n\n  &::after,\n  &::before {\n    content: "";\n    left: -23px;\n    position: absolute;\n    right: auto;\n    cursor: default;\n  }\n\n  &::before {\n    border-left: ',"px dashed\n      ",";\n    bottom: 50px;\n    height: 100%;\n    top: -","px;\n    width: 1px;\n  }\n\n  &::after {\n    border-top: ","px dashed\n      ",";\n    height: 20px;\n    top: ","px;\n    width: 27px;\n  }\n\n  &:last-child::before {\n    height: ","px;\n  }\n"],['\n  margin-left: 30px;\n  position: relative;\n\n  > span,\n  > i {\n    min-height: 20px;\n    vertical-align: middle;\n  }\n\n  .node-data-text {\n    display: inline-block;\n    padding: 0px 5px;\n  }\n\n  .node-data-text-toggle {\n    cursor: pointer;\n  }\n\n  &::after,\n  &::before {\n    content: "";\n    left: -23px;\n    position: absolute;\n    right: auto;\n    cursor: default;\n  }\n\n  &::before {\n    border-left: ',"px dashed\n      ",";\n    bottom: 50px;\n    height: 100%;\n    top: -","px;\n    width: 1px;\n  }\n\n  &::after {\n    border-top: ","px dashed\n      ",";\n    height: 20px;\n    top: ","px;\n    width: 27px;\n  }\n\n  &:last-child::before {\n    height: ","px;\n  }\n"])),(function(e){return e.showYLine?1:0}),(function(e){return e.lineColor}),(function(){return 12}),(function(e){return e.showXLine?1:0}),(function(e){return e.lineColor}),(function(){return 12}),(function(){return 24})),C=i.default.span(b||(b=s(["\n  display: inline-block;\n  padding: 3px 7px;\n  border-radius: 6px;\n  -webkit-border-radius: 6px;\n  -moz-border-radius: 6px;\n\n  > div {\n    display: flex;\n  }\n\n  ","/* Add cursor pointer to the entire content when selectable */\n  /* &:not([disabled]) {\n    cursor: pointer;\n  } */\n\n  /* Focus outline styling for accessibility */\n  /* &:focus {\n    outline: 2px solid #007bff;\n    outline-offset: 2px;\n  } */\n"],["\n  display: inline-block;\n  padding: 3px 7px;\n  border-radius: 6px;\n  -webkit-border-radius: 6px;\n  -moz-border-radius: 6px;\n\n  > div {\n    display: flex;\n  }\n\n  ","/* Add cursor pointer to the entire content when selectable */\n  /* &:not([disabled]) {\n    cursor: pointer;\n  } */\n\n  /* Focus outline styling for accessibility */\n  /* &:focus {\n    outline: 2px solid #007bff;\n    outline-offset: 2px;\n  } */\n"])),(function(e){return e.nodeSelected&&n.css(m||(m=s(["\n      ","\n      ","\n        color: ",";\n    "],["\n      ","\n      ","\n        color: ",";\n    "])),e.fullRowSelection&&n.css(u||(u=s(["\n        background-color: ",";\n      "],["\n        background-color: ",";\n      "])),e.selectedBgColor),!e.fullRowSelection&&n.css(p||(p=s(["\n        .node-data-text {\n          background-color: ",";\n          border-radius: 6px;\n          -webkit-border-radius: 6px;\n          -moz-border-radius: 6px;\n        }\n      "],["\n        .node-data-text {\n          background-color: ",";\n          border-radius: 6px;\n          -webkit-border-radius: 6px;\n          -moz-border-radius: 6px;\n        }\n      "])),e.selectedBgColor),e.selectedColor)})),w=i.default.i(g||(g=s(['\n  display: inline-block;\n  position: relative;\n  left: 1px;\n  top: 3px;\n  cursor: pointer;\n  width: 14px;\n  height: 14px;\n\n  + .node-data-text {\n    margin-left: 2px;\n  }\n\n  &::before,\n  &::after {\n    content: "";\n    position: absolute;\n    background-color: ',";\n    transition: transform 0.25s ease-out;\n  }\n\n  /* Vertical line */\n  &::before {\n    top: 0px;\n    left: 50%;\n    width: 2px;\n    height: 100%;\n    margin-left: -1px;\n  }\n\n  /* horizontal line */\n  &::after {\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: 2px;\n    margin-top: -1px;\n  }\n\n  ","\n\n  ","\n"],['\n  display: inline-block;\n  position: relative;\n  left: 1px;\n  top: 3px;\n  cursor: pointer;\n  width: 14px;\n  height: 14px;\n\n  + .node-data-text {\n    margin-left: 2px;\n  }\n\n  &::before,\n  &::after {\n    content: "";\n    position: absolute;\n    background-color: ',";\n    transition: transform 0.25s ease-out;\n  }\n\n  /* Vertical line */\n  &::before {\n    top: 0px;\n    left: 50%;\n    width: 2px;\n    height: 100%;\n    margin-left: -1px;\n  }\n\n  /* horizontal line */\n  &::after {\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: 2px;\n    margin-top: -1px;\n  }\n\n  ","\n\n  ","\n"])),(function(e){return e.nodeSelected?e.selectedColor:"#4d6878"}),(function(e){return e.disabled&&n.css(h||(h=s(["\n      cursor: default;\n      pointer-events: none;\n      opacity: 0.65;\n    "],["\n      cursor: default;\n      pointer-events: none;\n      opacity: 0.65;\n    "])))}),(function(e){return e.active&&n.css(x||(x=s(["\n      &:before {\n        transform: rotate(90deg);\n      }\n      &:after {\n        transform: rotate(180deg);\n      }\n    "],["\n      &:before {\n        transform: rotate(90deg);\n      }\n      &:after {\n        transform: rotate(180deg);\n      }\n    "])))})),S=i.default.div(v||(v=s(["\n  > .rdk-tree-item:first-child {\n    &::before {\n      height: 100%;\n      top: 15px;\n    }\n  }\n  > .rdk-tree-item:only-child::before {\n    border: 0px !important;\n  }\n"],["\n  > .rdk-tree-item:first-child {\n    &::before {\n      height: 100%;\n      top: 15px;\n    }\n  }\n  > .rdk-tree-item:only-child::before {\n    border: 0px !important;\n  }\n"]))),E=i.default.div(y||(y=s(["\n  text-align: left;\n\n  .rdk-tree-root {\n    > .rdk-tree-item:first-child::before {\n      height: 100%;\n      top: 15px;\n    }\n\n    > .rdk-tree-item:only-child::before {\n      border: 0 !important;\n    }\n  }\n"],["\n  text-align: left;\n\n  .rdk-tree-root {\n    > .rdk-tree-item:first-child::before {\n      height: 100%;\n      top: 15px;\n    }\n\n    > .rdk-tree-item:only-child::before {\n      border: 0 !important;\n    }\n  }\n"]))),N=function(e){var n=e.checked,t=void 0!==n&&n,r=e.disabled,l=void 0!==r&&r,i=e.name,d=e.className,c=e.label,s=e.labelClassName,f=e.onChange,u=e.onLabelClick;return a.default.createElement("span",{className:"node-cbx"},a.default.createElement("input",{type:"checkbox",name:i,className:o.HtmlUtils.joinClass("node-cbx-icon",d),checked:t,disabled:l,onChange:f}),c&&a.default.createElement("label",{className:o.HtmlUtils.joinClass("node-cbx-label",s),onClick:u},c))},T=function(e){var n=e.children;return"function"==typeof n?a.default.createElement(a.default.Fragment,null,n()):a.default.createElement(a.default.Fragment,null,n)},j=function(e){var n=e.children;return e.isActive&&n?a.default.createElement("div",{className:"rdk-tree-view"},n):null},H=t.createContext({}),O=function(e){var n=e.children,t=e.className;return a.default.createElement(S,{className:o.HtmlUtils.joinClass("rdk-tree-root rdk-tree-view",t)},n)};function U(e,n,t){var r=e.element.getBoundingClientRect(),l=n.getBoundingClientRect();if(r.bottom!==l.bottom){var i,a,d,c,s=e.element.scrollTop,f=l.top-r.top;if(t){var u=f+s,p=parseInt(n.style.paddingTop||"0")||0;if(s=u-p,f/e.containerHeight<.7&&f>p)return void e.update();o.HtmlUtils.scrollTo(e.element,s,500)}else{var m=l.bottom-r.bottom;if(m<l.height&&m>0)return o.HtmlUtils.scrollTo(e.element,f+s,500),void e.update();var b=(i=e.element,a="span.node-content",d=Array.from(i.querySelectorAll(a)).reverse(),c=d.findIndex((function(e){return o.HtmlUtils.isVisible(e)})),d[c]);if(!b)return;var h=b.getBoundingClientRect(),x=r.bottom-h.top-h.height;if(x>=l.height){var g=e.element.scrollHeight-x;o.HtmlUtils.scrollTo(e.element,g,500)}else l.top<r.top&&o.HtmlUtils.scrollTo(e.element,f+s,500);e.update()}}else e.update()}e.StyledTreeContainer=S,e.StyledTreeItem=k,e.StyledTreeItemContent=C,e.StyledTreeItemIcon=w,e.StyledTreeScroll=E,e.TreeItem=function(e){var n=e.children,r=e.id,l=e.className,i=e.iconClassName,d=e.showCheckbox,c=e.checkboxName,s=e.checkboxClassName,f=e.labelCheckboxText,u=e.labelCheckboxClassName,p=e.nodeContent,m=e.isOpen,b=void 0!==m&&m,h=e.disabled,x=void 0!==h&&h,g=e.fullRowSelection,v=void 0!==g&&g,y=e.selectedWhenToggle,S=void 0!==y&&y,E=e.selectedColor,O=void 0===E?"#000":E,U=e.selectedBgColor,I=void 0===U?"transparent":U,R=e.lineColor,L=void 0===R?"#92adc0":R,z=e.selected,P=void 0!==z&&z,B=e.hideNodeIcon,A=e.showXLine,V=void 0===A||A,q=e.showYLine,D=void 0===q||q,F=e.tabIndex,X=void 0===F?0:F,Y=e.selfData,_=e.onClick,M=e.onToggle,W=(t.useContext(H)||{}).notifyToggle,G=t.useState(b),J=G[0],K=G[1],Q=t.useState(P),Z=Q[0],$=Q[1];function ee(e){null==W||W([!J,e.target.closest("span.node-content")]),null==M||M(!J,Y),K(!J)}function ne(e){$(!Z),null==_||_(e,!Z,Y)}function te(e){x||(ee(e),S&&ne(e))}function oe(e){!x&&S&&ee(e),ne(e)}return t.useEffect((function(){return $(P)}),[P]),t.useEffect((function(){return K(b)}),[b]),a.default.createElement(k,{id:r,className:o.HtmlUtils.joinClass("rdk-tree-item",{"has-child":!!n},{"is-active":J},l),showXLine:V,showYLine:D,lineColor:L},a.default.createElement(C,{className:o.HtmlUtils.joinClass("node-content",{"is-active":J},{disabled:x},{selected:Z}),nodeSelected:Z,selectedColor:O,selectedBgColor:I,fullRowSelection:v,tabIndex:X},a.default.createElement("div",null,!B&&a.default.createElement(w,{className:o.HtmlUtils.joinClass("node-icon",i),active:J,disabled:x,selectedColor:O,nodeSelected:Z,onClick:te}),d&&a.default.createElement(N,{checked:J,disabled:x,name:c,className:s,label:f,labelClassName:S?"node-data-text-toggle":u,onChange:te,onLabelClick:oe}),a.default.createElement("span",{className:o.HtmlUtils.joinClass("node-data-text",S&&"node-data-text-toggle"),onClick:oe},a.default.createElement(T,null,p)))),a.default.createElement(j,{isActive:J},n))},e.TreeScrollView=function(e){var n=e.children,r=e.className,l=e.effectData,i=void 0===l?[]:l,s=e.always,f=void 0===s||s,u=e.refScroll,p=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}(e,["children","className","effectData","always","refScroll"]),m=t.useRef(null),b=t.useState([]),h=b[0],x=b[1],g=t.useState(0),v=g[0],y=g[1];t.useLayoutEffect((function(){if(h){var e=h[0],n=h[1];n&&m.current&&m.current.element&&(U(m.current,n,e),u&&(u.current=m.current),y(Date.now()))}}),[h]);return a.default.createElement(H.Provider,{value:{notifyToggle:function(e){x(e)},flagHeight:v}},a.default.createElement(E,{className:"rdk-wrapper-scroll"},a.default.createElement(d.default,c({refScroll:m,effectData:i,className:o.HtmlUtils.joinClass("rdk-tree-scroll",r),always:f},p),a.default.createElement(O,null,n))))},e.TreeView=O,e.default=O,Object.defineProperty(e,"__esModule",{value:!0})}));
