!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("styled-components"),require("react"),require("@delpi/common"),require("react-perfect-scrollbar-z")):"function"==typeof define&&define.amd?define(["exports","styled-components","react","@delpi/common","react-perfect-scrollbar-z"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).ReactTreeView={},e.styled,e.React,e.common,e.Scrollbar)}(this,(function(e,n,t,o,r){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=l(n),a=l(t),d=l(r);function c(e,n,t){if(t||2===arguments.length)for(var o,r=0,l=n.length;r<l;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}function s(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}"function"==typeof SuppressedError&&SuppressedError;var u,p,f,h,m,x,b,g,v,C=i.default.div(u||(u=s(["\n  margin-left: 30px;\n  position: relative;\n\n  > span,\n  > i {\n    min-height: 20px;\n    vertical-align: middle;\n  }\n\n  .node-data-text {\n    display: inline-block;\n    padding: 0px 5px;\n  }\n\n  .node-data-text-toggle {\n    cursor: pointer;\n  }\n\n  &::after,\n  &::before {\n    content: '';\n    left: -23px;\n    position: absolute;\n    right: auto;\n    cursor: default;\n  }\n\n  &::before {\n    border-left: ","px dashed\n      ",";\n    bottom: 50px;\n    height: 100%;\n    top: -","px;\n    width: 1px;\n  }\n\n  &::after {\n    border-top: ","px dashed\n      ",";\n    height: 20px;\n    top: ","px;\n    width: 27px;\n  }\n\n  &:last-child::before {\n    height: ","px;\n  }\n"],["\n  margin-left: 30px;\n  position: relative;\n\n  > span,\n  > i {\n    min-height: 20px;\n    vertical-align: middle;\n  }\n\n  .node-data-text {\n    display: inline-block;\n    padding: 0px 5px;\n  }\n\n  .node-data-text-toggle {\n    cursor: pointer;\n  }\n\n  &::after,\n  &::before {\n    content: '';\n    left: -23px;\n    position: absolute;\n    right: auto;\n    cursor: default;\n  }\n\n  &::before {\n    border-left: ","px dashed\n      ",";\n    bottom: 50px;\n    height: 100%;\n    top: -","px;\n    width: 1px;\n  }\n\n  &::after {\n    border-top: ","px dashed\n      ",";\n    height: 20px;\n    top: ","px;\n    width: 27px;\n  }\n\n  &:last-child::before {\n    height: ","px;\n  }\n"])),(function(e){return e.showYLine?1:0}),(function(e){return e.lineColor}),(function(){return 12}),(function(e){return e.showXLine?1:0}),(function(e){return e.lineColor}),(function(){return 12}),(function(){return 24})),y=i.default.span(m||(m=s(["\n  display: inline-block;\n  padding: 3px 7px;\n  border-radius: 6px;\n  -webkit-border-radius: 6px;\n  -moz-border-radius: 6px;\n\n  > div {\n    display: flex;\n  }\n\n  ","\n"],["\n  display: inline-block;\n  padding: 3px 7px;\n  border-radius: 6px;\n  -webkit-border-radius: 6px;\n  -moz-border-radius: 6px;\n\n  > div {\n    display: flex;\n  }\n\n  ","\n"])),(function(e){return e.nodeSelected&&n.css(h||(h=s(["\n      ","\n      ","\n        color: ",";\n    "],["\n      ","\n      ","\n        color: ",";\n    "])),e.fullRowSelection&&n.css(p||(p=s(["\n        background-color: ",";\n      "],["\n        background-color: ",";\n      "])),e.selectedBgColor),!e.fullRowSelection&&n.css(f||(f=s(["\n        .node-data-text {\n          background-color: ",";\n          border-radius: 6px;\n          -webkit-border-radius: 6px;\n          -moz-border-radius: 6px;\n        }\n      "],["\n        .node-data-text {\n          background-color: ",";\n          border-radius: 6px;\n          -webkit-border-radius: 6px;\n          -moz-border-radius: 6px;\n        }\n      "])),e.selectedBgColor),e.selectedColor)})),w=i.default.i(g||(g=s(["\n  display: inline-block;\n  position: relative;\n  left: 1px;\n  top: 3px;\n  cursor: pointer;\n  width: 14px;\n  height: 14px;\n\n  + .node-data-text {\n    margin-left: 2px;\n  }\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background-color: ",";\n    transition: transform 0.25s ease-out;\n  }\n\n  /* Vertical line */\n  &::before {\n    top: 0px;\n    left: 50%;\n    width: 2px;\n    height: 100%;\n    margin-left: -1px;\n  }\n\n  /* horizontal line */\n  &::after {\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: 2px;\n    margin-top: -1px;\n  }\n\n  ","\n\n  ","\n"],["\n  display: inline-block;\n  position: relative;\n  left: 1px;\n  top: 3px;\n  cursor: pointer;\n  width: 14px;\n  height: 14px;\n\n  + .node-data-text {\n    margin-left: 2px;\n  }\n\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background-color: ",";\n    transition: transform 0.25s ease-out;\n  }\n\n  /* Vertical line */\n  &::before {\n    top: 0px;\n    left: 50%;\n    width: 2px;\n    height: 100%;\n    margin-left: -1px;\n  }\n\n  /* horizontal line */\n  &::after {\n    top: 50%;\n    left: 0;\n    width: 100%;\n    height: 2px;\n    margin-top: -1px;\n  }\n\n  ","\n\n  ","\n"])),(function(e){return e.nodeSelected?e.selectedColor:"#4d6878"}),(function(e){return e.disabled&&n.css(x||(x=s(["\n      cursor: default;\n      pointer-events: none;\n      opacity: 0.65;\n    "],["\n      cursor: default;\n      pointer-events: none;\n      opacity: 0.65;\n    "])))}),(function(e){return e.active&&n.css(b||(b=s(["\n      &:before {\n        transform: rotate(90deg);\n      }\n      &:after {\n        transform: rotate(180deg);\n      }\n    "],["\n      &:before {\n        transform: rotate(90deg);\n      }\n      &:after {\n        transform: rotate(180deg);\n      }\n    "])))})),S=i.default.div(v||(v=s(["\n  > .rdk-tree-item:first-child {\n    &::before {\n      height: 100%;\n      top: 15px;\n    }\n  }\n  > .rdk-tree-item:only-child::before {\n    border: 0px !important;\n  }\n"],["\n  > .rdk-tree-item:first-child {\n    &::before {\n      height: 100%;\n      top: 15px;\n    }\n  }\n  > .rdk-tree-item:only-child::before {\n    border: 0px !important;\n  }\n"]))),k=function(e){var n=e.children,t=e.className;return a.default.createElement(S,{className:o.HtmlUtils.joinClass("rdk-tree-root rdk-tree-view",t)},n)},E=t.createContext({});var T=function(e){var n=e.children;return o.CmUtils.isFunc(n)?n():n},R=function(e){var n=e.children;return e.isActive&&n?a.default.createElement("div",{className:"rdk-tree-view"},n):null},U=a.default.memo((function(e){var n=e.children,r=e.id,l=e.className,i=e.iconClassName,d=e.showCheckbox,c=e.checkboxName,s=e.checkboxClassName,u=e.labelCheckboxText,p=e.labelCheckboxClassName,f=e.nodeContent,h=e.isOpen,m=void 0!==h&&h,x=e.disabled,b=void 0!==x&&x,g=e.fullRowSelection,v=void 0!==g&&g,S=e.selectedWhenToggle,k=void 0!==S&&S,U=e.selectedColor,H=void 0===U?"#000":U,N=e.selectedBgColor,j=void 0===N?"transparent":N,L=e.lineColor,X=void 0===L?"#92adc0":L,Y=e.selected,z=void 0!==Y&&Y,I=e.hideNodeIcon,B=e.showXLine,D=void 0===B||B,A=e.showYLine,V=void 0===A||A,q=e.selfData,F=e.onClick,O=void 0===F?function(){}:F,P=e.onToggle,W=void 0===P?function(){}:P,_=(t.useContext(E)||{}).notifyToggle,M=t.useState(m),G=M[0],J=M[1],K=t.useState(z),Q=K[0],Z=K[1];function $(e){b||(ne(e),k&&te(e))}function ee(e){!b&&k&&ne(e),te(e)}function ne(e){o.CmUtils.isFunc(_)&&_([!G,e.target.closest("span.node-content")]),o.CmUtils.isFunc(W)&&W(!G,q),J(!G)}function te(e){Z(!Q),o.CmUtils.isFunc(O)&&O(e,!Q,q)}return t.useEffect((function(){return Z(z)}),[z]),t.useEffect((function(){return J(m)}),[m]),a.default.createElement(C,{id:r,className:o.HtmlUtils.joinClass("rdk-tree-item",{"has-child":!!n},{"is-active":G},l),showXLine:D,showYLine:V,lineColor:X},a.default.createElement(y,{className:o.HtmlUtils.joinClass("node-content",{"is-active":G},{disabled:b},{selected:Q}),nodeSelected:Q,selectedColor:H,selectedBgColor:j,fullRowSelection:v},a.default.createElement("div",null,!I&&a.default.createElement(w,{className:o.HtmlUtils.joinClass("node-icon",i),active:G,disabled:b,selectedColor:H,nodeSelected:Q,onClick:$}),d&&a.default.createElement("span",{className:"node-cbx"},a.default.createElement("input",{type:"checkbox",name:c,className:o.HtmlUtils.joinClass("node-cbx-icon",s),checked:G,disabled:b,onChange:$}),a.default.createElement("label",{className:o.HtmlUtils.joinClass("node-cbx-label",k&&"node-data-text-toggle",p),onClick:ee},u)),a.default.createElement("span",{className:o.HtmlUtils.joinClass("node-data-text",k&&"node-data-text-toggle"),onClick:ee},a.default.createElement(T,null,f)))),a.default.createElement(R,{isActive:G},n))}));e.StyledTreeContainer=S,e.StyledTreeItem=C,e.StyledTreeItemContent=y,e.StyledTreeItemIcon=w,e.TreeItem=U,e.TreeScrollView=function(e){var n=e.children,r=e.className,l=e.effectData,i=void 0===l?[]:l,s=e.maxHeight,u=e.maxWidth,p=e.width,f=e.height,h=e.always,m=void 0===h||h,x=e.refScroll,b=e.onScrollY,g=e.onScrollX,v=e.onScrollUp,C=e.onScrollDown,y=e.onScrollLeft,w=e.onScrollRight,S=e.onYReachStart,T=e.onYReachEnd,R=e.onXReachStart,U=e.onXReachEnd,H=t.useRef(),N=t.useState([]),j=N[0],L=N[1],X=t.useState(0),Y=X[0],z=X[1];t.useLayoutEffect((function(){if(j.length>0){var e=j[0],n=j[1];if(!n)return;z(+new Date);var t=n,r=H.current,l=r.element.getBoundingClientRect(),i=t.getBoundingClientRect();if(l.bottom===i.bottom)return void r.update();var a=r.element.scrollTop,d=i.top-l.top;if(e){var c=d+a,s=parseInt(t.style.paddingTop||0)||0;if(a=c-s,d/r.containerHeight<.7&&d>s)return void r.update();o.HtmlUtils.scrollTo(r.element,a,500)}else{var u=i.bottom-l.bottom;if(u<i.height&&u>0)return o.HtmlUtils.scrollTo(r.element,d+a,500),void r.update();var p=(b=r.element,g="span.node-content",v=Array.from(b.querySelectorAll(g)).reverse(),C=v.findIndex((function(e){return o.HtmlUtils.isVisible(e)})),v[C]);if(!p)return;var f=p.getBoundingClientRect(),h=l.bottom-f.top-f.height;if(h>=i.height){var m=r.element.scrollHeight-h;o.HtmlUtils.scrollTo(r.element,m,500)}else i.top<l.top&&o.HtmlUtils.scrollTo(r.element,d+a,500);r.update()}}var b,g,v,C;x&&!x.current&&(x.current=H.current)}),[j,x]);return a.default.createElement(E.Provider,{value:{notifyToggle:function(e){return L(c(c([],e,!0),[+new Date],!1))},flagHeight:Y}},a.default.createElement(d.default,{refScroll:H,effectData:i,className:o.HtmlUtils.joinClass("rdk-tree-scroll",r),maxHeight:s,maxWidth:u,width:p,height:f,always:m,onScrollY:b,onScrollX:g,onScrollUp:v,onScrollDown:C,onScrollLeft:y,onScrollRight:w,onYReachStart:S,onYReachEnd:T,onXReachStart:R,onXReachEnd:U},a.default.createElement(k,null,n)))},e.TreeView=k,Object.defineProperty(e,"__esModule",{value:!0})}));
